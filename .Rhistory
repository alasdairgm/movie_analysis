source("~/Documents/GitHub/movie_analysis/synopsis_df_creator.R", echo=TRUE)
library(tidyverse)
library(tidytext)
movies <- read_csv("clean_data/movies_clean.csv")
synopses_df <- movies %>%
select(title, synopsis) %>%
unnest_tokens(word, synopsis)
synopses_df
synopses_df %>%
count(title, word)
synopses_df_no_stop <- synopses_df %>%
anti_join(stop_words, by = "word") %>%
count(title, word, sort = TRUE)
all_synopses_tf_idf <- synopses_df_no_stop %>%
count(title, word) %>%
bind_tf_idf(term = word, document = title, n = n) %>%
arrange(desc(tf_idf))
all_synopses_tf_idf
all_synopses_tf_idf %>%
group_by(title) %>%
slice_max(tf_idf, n = 1)
just_words <- movies %>%
select(synopsis) %>%
unnest_tokens(word, synopsis) %>%
anti_join(stop_words, by = "word") %>%
count(word)
just_words
library(ggwordcloud)
ggwordcloud(
words = just_words$word,
freq = just_words$n,
min.freq = 2
)
# can see sentiment words here
get_sentiments("afinn")
just_words %>%
inner_join(get_sentiments("afinn")) %>%
mutate(abs_value = abs(value)) %>%
slice_max(abs_value, n = 5) %>%  # most emotive words, regardless of positice or negative
mutate(word = factor(word, levels = word)) %>% # alphabetical
ggplot() +
aes(x = word, y = n, fill = value) +
geom_col() +
scale_fill_gradient2() +
labs(x = "\nWord in film synopses",
y = "Number of occurences\nacross all synopses\n",
fill = "Sentiment value") +
theme_minimal() +
theme(axis.text.x = element_text(angle = 45, hjust = 1),
axis.title = element_text(size = 8),
legend.title = element_text(size = 8))
just_words
library(tidyverse)
library(tidytext)
movies <- read_csv("clean_data/movies_clean.csv")
synopses_df <- movies %>%
select(title, synopsis) %>%
unnest_tokens(word, synopsis)
synopses_df
library(tidyverse)
movies <- janitor::clean_names(read_csv("raw_data/ratings.csv"))
synopses <- read_csv("raw_data/synopsis_data.csv")
movies_clean <- movies %>%
left_join(synopses, by = c("title" = "movie")) %>%
select(-c("const", "url", "title_type")) %>%
relocate(title, .before = 1) # move title to first col
movies_clean
library(tidyverse)
movies <- janitor::clean_names(read_csv("raw_data/ratings.csv"))
synopses <- read_csv("raw_data/synopsis_data.csv")
movies_clean <- movies %>%
left_join(synopses, by = c("title" = "movie")) %>%
select(-c("const", "url", "title_type")) %>%
relocate(title, .before = 1) # move title to first col
movies_clean
synopses
movies_clean <- movies %>%
left_join(synopses, by = c("title" = "movie")) %>%
select(-c("const", "url", "title_type")) %>%
relocate(title, .before = 1) # move title to first col
movies_clean
movies_clean <- movies %>%
left_join(synopses, by = c("title" = "movie")) %>%
select(-c("const", "url", "title_type")) %>%
relocate(title, .before = 1) # move title to first col
movies_clean
synopses
